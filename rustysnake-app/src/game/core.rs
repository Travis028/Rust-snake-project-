// ... (paste the full content of core.rs from the original message) ...
